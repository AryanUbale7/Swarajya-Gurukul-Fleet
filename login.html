<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | Swarajya Gurukul Fleet</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --dark: #0f172a;
            --gold: #fbbf24;
            --bg: #f8fafc;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Plus Jakarta Sans', sans-serif; }
        
        body { 
            background: radial-gradient(circle at top right, #eef2ff, #f8fafc);
            display: flex; align-items: center; justify-content: center; min-height: 100vh;
            padding: 20px;
        }

        .login-card {
            background: white; width: 100%; max-width: 450px; padding: 50px 40px;
            border-radius: 35px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(226, 232, 240, 0.8); text-align: center;
        }

        /* School Logo */
        .logo-box img { width: 100px; height: 100px; object-fit: contain; margin-bottom: 15px; }
        .school-name { font-size: 20px; font-weight: 800; color: var(--dark); letter-spacing: 0.5px; margin-bottom: 5px; }
        .sub-text { color: #64748b; font-size: 14px; margin-bottom: 35px; }

        .input-group { text-align: left; margin-bottom: 20px; position: relative; }
        .input-group label { display: block; font-size: 13px; font-weight: 700; color: #475569; margin-bottom: 8px; margin-left: 5px; }
        
        .input-wrapper { position: relative; }
        .input-wrapper i { position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #94a3b8; width: 18px; }
        
        input, select {
            width: 100%; padding: 14px 14px 14px 45px; border-radius: 16px;
            border: 2px solid #f1f5f9; background: #f8fafc; font-size: 15px; font-weight: 600;
            transition: 0.3s; outline: none; appearance: none;
        }

        input:focus, select:focus { border-color: var(--primary); background: white; box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1); }

        .login-btn {
            width: 100%; padding: 16px; border-radius: 18px; border: none;
            background: var(--dark); color: white; font-size: 16px; font-weight: 700;
            cursor: pointer; transition: 0.3s; margin-top: 10px;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }

        .login-btn:hover { background: #1e293b; transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
    </style>
</head>
<body>

<div class="login-card">
    <div class="logo-box">
        <img src="school-logo.png" alt="Swarajya Gurukul">
    </div>
    <h1 class="school-name">SWARAJYA GURUKUL</h1>
    <p class="sub-text">Fleet Management System Portal</p>

    <form onsubmit="handleLogin(event)">
        <div class="input-group">
            <label>Login As</label>
            <div class="input-wrapper">
                <i data-lucide="user-circle"></i>
                <select id="role" required>
                    <option value="" disabled selected>Select your role</option>
                    <option value="admin">Administrator</option>
                    <option value="driver">School Bus Driver</option>
                    <option value="cleaner">Bus Attendant / Cleaner</option>
                </select>
            </div>
        </div>

        <div class="input-group">
            <label>Username / ID</label>
            <div class="input-wrapper">
                <i data-lucide="user"></i>
                <input type="text" id="username" placeholder="Enter your ID" required>
            </div>
        </div>

        <div class="input-group">
            <label>Password</label>
            <div class="input-wrapper">
                <i data-lucide="lock"></i>
                <input type="password" id="password" placeholder="••••••••" required>
            </div>
        </div>

        <button type="submit" class="login-btn">
            Sign In <i data-lucide="arrow-right"></i>
        </button>
    </form>
</div>

<script>
    lucide.createIcons();

    function handleLogin(e) {
        e.preventDefault();
        const role = document.getElementById('role').value;
        const inputID = document.getElementById('username').value;

        if(role === 'admin') {
            localStorage.setItem("token", "admin-logged-in");
            window.location.href = "index.html"; 
        } 
        else if(role === 'driver') {
            // 1. Regular Drivers List
            const driversList = [
                { id: 1, name: "Ramesh Kumar", bus: "B-01", photo: "https://api.dicebear.com/7.x/avataaars/svg?seed=Ramesh" },
                { id: 2, name: "Suresh Singh", bus: "B-02", photo: "https://api.dicebear.com/7.x/avataaars/svg?seed=Suresh" },
                { id: 3, name: "Abdul Khan", bus: "B-03", photo: "https://api.dicebear.com/7.x/avataaars/svg?seed=Abdul" },
                { id: 4, name: "Mahesh Patil", bus: "B-04", photo: "https://api.dicebear.com/7.x/avataaars/svg?seed=Mahesh" },
                { id: 5, name: "Vikram Dada", bus: "B-05", photo: "https://api.dicebear.com/7.x/avataaars/svg?seed=Vikram" }
            ];

            // 2. Standby Driver Pool (Backup Specialists)
            const standbyList = [
                { id: 101, name: "Rajesh Khanna", role: "Backup Specialist 1", photo: "https://api.dicebear.com/7.x/avataaars/svg?seed=Rajesh" },
                { id: 102, name: "Sanjay Dutt", role: "Backup Specialist 2", photo: "https://api.dicebear.com/7.x/avataaars/svg?seed=Sanjay" }
            ];

            // Check in Regular List
            const foundDriver = driversList.find(d => d.id == inputID);
            // Check in Standby List
            const foundStandby = standbyList.find(d => d.id == inputID);

            if (foundDriver) {
                localStorage.setItem("currentDriver", JSON.stringify(foundDriver));
                window.location.href = "driver-dashboard.html";
            } 
            else if (foundStandby) {
                localStorage.setItem("currentDriver", JSON.stringify(foundStandby));
                window.location.href = "standby-dashboard.html"; // Standby Portal par redirect
            }
            else {
                alert("Invalid ID! Regular: 1-5 | Standby: 101-102");
            }
        } 
        else if(role === 'cleaner') {
            const mockCleaner = { id: inputID, name: "Helper " + inputID, bus: "B-0" + inputID };
            localStorage.setItem("currentCleaner", JSON.stringify(mockCleaner));
            window.location.href = "cleaner-dashboard.html";
        }
    }
</script>
</body>
</html>